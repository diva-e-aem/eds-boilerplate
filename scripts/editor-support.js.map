{"version":3,"mappings":"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","names":["wrapTextNodes","block","validWrappers","wrap","el","wrapper","nodeName","nodeValue","blockColumn","_a","_b","tagName","decorateBlock","shortBlockName","blockWrapper","section","decorateBlocks","main","decorateButtons","element","a","up","twoup","collectBlocks","blockMap","t","e","o","c","decorators","n","throttle","domHelpers","r","i","s","d","l","u","f","getCurrentMQ","onEvent","apiHelpers","objectHelpers","g","m","isSidekickLibraryActive","getOrigin","getUrlForEndpoint","endpoint","location","baseUrl","error","loadBlockModules","blockStatus","href","blockModule","DebuggerService","loadCSS","resolve","reject","link","loadBlockStyles","showSection","loadBlock","sectionsBlocks","blockPromises","loadBlocks","parentElement","SectionsPromises","decorateImages","item","adjustMarkup","wrappers","defaultContent","toClassName","name","toCamelCase","readBlockConfig","config","row","cols","col","value","as","imgs","img","ps","p","processSectionMetaData","sectionMeta","meta","key","style","transformSections","decorateRichtext","container","deleteInstrumentation","richtextResource","richtextProp","richtextFilter","richtextLabel","siblings","sibling","orphanElements","editable","orphanElement","group","observer","applyChanges","event","_c","_d","_e","_f","_g","_h","_i","_j","detail","resource","updates","content","parsedUpdate","newMain","attachEventListners","blockResource","newBlock","newElements","newSection","eventType"],"sources":["../src/app/tasks/wrapTextNodes.ts","../src/app/tasks/decorateBlock.ts","../src/app/tasks/decorateBlocks.ts","../src/app/tasks/decorateButtons.ts","../src/app/tasks/collectBlocks.ts","../node_modules/@kluntje/services/node_modules/@kluntje/js-utils/lib/function-helpers/decorators/index.js","../node_modules/@kluntje/services/node_modules/@kluntje/js-utils/lib/dom-helpers/index.js","../node_modules/@kluntje/services/node_modules/@kluntje/js-utils/lib/api-helpers/index.js","../node_modules/@kluntje/services/node_modules/@kluntje/js-utils/lib/object-helpers/index.js","../node_modules/@kluntje/services/lib/index.module.js","../src/helpers/sidekick/isSidekickLibraryActive.ts","../src/helpers/sidekick/getOrigin.ts","../src/app/utils/getUrlForEndpoint.ts","../src/app/tasks/loadBlockModules.ts","../src/app/tasks/loadCSS.ts","../src/app/tasks/loadBlockStyles.ts","../src/app/tasks/showSection.ts","../src/app/tasks/loadBlock.ts","../src/app/tasks/loadBlocks.ts","../src/app/tasks/decorateImages.ts","../src/app/tasks/adjustMarkup.ts","../src/utils/toClassName.ts","../src/utils/toCamelCase.ts","../src/app/tasks/readBlockConfig.ts","../src/app/tasks/processSectionMetaData.ts","../src/app/tasks/transformSections.ts","../src/app/editor/editor-support-rte.ts","../src/app/editor/editor-support.ts"],"sourcesContent":["/**\n * Wrap inline text content of block cells within a <p> tag.\n * @param {Element} block the block element\n */\nexport function wrapTextNodes(block: HTMLElement) {\n  const validWrappers = ['P', 'PRE', 'UL', 'OL', 'PICTURE', 'TABLE', 'H1', 'H2', 'H3', 'H4', 'H5', 'H6'];\n\n  const wrap = (el: HTMLElement) => {\n    const wrapper = document.createElement('p');\n    wrapper.append(...el.childNodes);\n    [...el.attributes]\n      // move the instrumentation from the cell to the new paragraph, also keep the class\n      // in case the content is a buttton and the cell the button-container\n      .filter(\n        ({ nodeName }) =>\n          nodeName === 'class' || nodeName.startsWith('data-aue') || nodeName.startsWith('data-richtext')\n      )\n      .forEach(({ nodeName, nodeValue }) => {\n        wrapper.setAttribute(nodeName, nodeValue || '');\n        el.removeAttribute(nodeName);\n      });\n    el.append(wrapper);\n  };\n\n  block.querySelectorAll(':scope > div > div').forEach((blockColumn: HTMLElement) => {\n    if (blockColumn.hasChildNodes()) {\n      const hasWrapper =\n        Boolean(blockColumn.firstElementChild) &&\n        validWrappers.some((tagName) => blockColumn?.firstElementChild?.tagName === tagName);\n      if (!hasWrapper) {\n        wrap(blockColumn);\n      } else if (\n        blockColumn.firstElementChild?.tagName === 'PICTURE' &&\n        (blockColumn.children.length > 1 || Boolean(blockColumn.textContent?.trim()))\n      ) {\n        wrap(blockColumn);\n      }\n    }\n  });\n}\n","import { wrapTextNodes } from './wrapTextNodes';\n\n/**\n * Decorate block with classes and data attributes.\n * @param {HTMLElement | null} block - Html block element\n */\nexport function decorateBlock(block: HTMLElement | null) {\n  if (block) {\n    const shortBlockName = block.classList[0];\n    if (shortBlockName && !block.dataset.blockStatus) {\n      block.classList.add('block');\n      block.dataset.blockName = shortBlockName;\n      block.dataset.blockStatus = 'initialized';\n      wrapTextNodes(block);\n      const blockWrapper = block.parentElement;\n      blockWrapper?.classList.add(`${shortBlockName}-wrapper`);\n      const section = block.closest('.section');\n      if (section) section.classList.add(`${shortBlockName}-container`);\n    }\n  }\n}\n","import { decorateBlock } from './decorateBlock';\n\n/**\n * Decorate blocks with classes and data attributes.\n * @param {HTMLElement} main - Html main element\n */\nexport function decorateBlocks(main: HTMLElement | null) {\n  main?.querySelectorAll<HTMLDivElement>('div.section > div > div').forEach((block) => {\n    decorateBlock(block);\n  });\n}\n","/**\n * Decorates paragraphs containing a single link as buttons.\n * @param {Element} element container element\n */\nexport function decorateButtons(element: Element | null) {\n  element?.querySelectorAll('a').forEach((a) => {\n    a.title = a.title || a.textContent!;\n    if (a.href !== a.textContent) {\n      const up = a.parentElement!;\n      const twoup = a.parentElement!.parentElement!;\n      if (!a.querySelector('img')) {\n        if (up.childNodes.length === 1 && (up.tagName === 'P' || up.tagName === 'DIV')) {\n          a.className = 'button'; // default\n          up.classList.add('button-container');\n        }\n        if (\n          up.childNodes.length === 1 &&\n          up.tagName === 'STRONG' &&\n          twoup.childNodes.length === 1 &&\n          twoup.tagName === 'P'\n        ) {\n          a.className = 'button primary';\n          twoup.classList.add('button-container');\n        }\n        if (\n          up.childNodes.length === 1 &&\n          up.tagName === 'EM' &&\n          twoup.childNodes.length === 1 &&\n          twoup.tagName === 'P'\n        ) {\n          a.className = 'button secondary';\n          twoup.classList.add('button-container');\n        }\n      }\n    }\n  });\n}\n","import { BlockMapping } from '../app.types';\n\n/**\n * Collect all blocks in a section.\n * @param {HTMLElement} section - The section to collect the blocks from.\n * @returns {BlockMapping[]}\n * @example\n * const blocks = collectBlocks(section);\n * console.log(blocks);\n * Output: [{ name: 'block1', element: HTMLElement }, { name: 'block2', element: HTMLElement }]\n */\nexport function collectBlocks(section: HTMLElement): BlockMapping[] {\n  const blockMap: BlockMapping[] = [];\n  const blocksElements = section.querySelectorAll<HTMLDivElement>('[data-block-name]');\n\n  blocksElements.forEach((block: HTMLDivElement) => {\n    blockMap.push({\n      name: block.dataset.blockName as string,\n      element: block,\n    });\n  });\n\n  return blockMap;\n}\n","\"use strict\";function t(t){return function(...e){return function(n,o,c){return Object.assign(Object.assign({},c),{value:t(c.value,...e)})}}}Object.defineProperty(exports,\"__esModule\",{value:!0});const e=t((function(t,e=0){let n=-1;const o=function(...o){clearTimeout(n),n=window.setTimeout((()=>{t.call(this,...o)}),e)};return o.cancel=function(){clearTimeout(n)},o})),n=t((function(t,e=0){let n,o=[];const c=function(...c){o=c,void 0===n&&(n=window.setTimeout((()=>{n=void 0,t.call(this,...o)}),e))};return c.cancel=function(){clearTimeout(n),n=void 0},c}));exports.debounce=e,exports.throttle=n;\n//# sourceMappingURL=index.js.map\n","\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0});const e=(e,t)=>null===e?[]:e instanceof Document||null===e.shadowRoot||void 0===e.shadowRoot?Array.from(e.querySelectorAll(t)):Array.from(e.shadowRoot.querySelectorAll(t)),t=(e,...t)=>{if(void 0!==e&&0!==t.length&&null!==e){e instanceof Element&&(e=[e]),e instanceof NodeList&&(e=Array.from(e));for(const n of e)n.classList.remove(...t)}},n=(e,...t)=>{if(void 0!==e&&0!==t.length&&null!==e){e instanceof Element&&(e=[e]),e instanceof NodeList&&(e=Array.from(e));for(const n of e)n.classList.add(...t)}},o=(e,t)=>e.classList.contains(t);function r(e){return Symbol.iterator in e}function i(e){return\"length\"in e?e.length>0:!e[Symbol.iterator]().next().done}const s=(e,t,n,o,a)=>{if(null==e||r(e)&&!i(e))return;if(r(e)&&!(e instanceof HTMLElement)){for(const r of e)s(r,t,n,o,a);return}let d;d=\"string\"==typeof t?t.trim().split(\" \"):t,d.forEach((t=>{const r=l(e,t,n,o);if(!o.eventBindingMap[r]){const i=n.bind(o);return o.eventBindingMap[r]=i,e.addEventListener(t.trim(),i,a)}}))};function l(e,t,n,o){return`${a(e,o)}#\\n          ${t.trim()}#\\n          ${a(n,o)}#\\n          ${a(o,o)}`.replace(/\\n/gm,\"\").replace(/\\s/g,\"\")}function a(e,t){let n;if(t.eventIdMap.has(e))n=t.eventIdMap.get(e);else{const o=\"xxxxxxxx\".replace(/x/g,d).toLowerCase();t.eventIdMap.set(e,o),n=o}return n}function d(){return(100*Math.random()%36|0).toString(36)}const c=(e,t,n,o,s)=>{if(null==e||r(e)&&!i(e))return;if(r(e)&&!(e instanceof HTMLElement)){for(const r of e)c(r,t,n,o,s);return}let a;a=\"string\"==typeof t?t.trim().split(\" \"):t,a.forEach((t=>{const r=l(e,t,n,o),i=o.eventBindingMap[r];i&&(delete o.eventBindingMap[r],e.removeEventListener(t,i,s))}))},u=(t,n)=>{e(t,n).forEach((e=>t.removeChild(e)))},f=(e,t,n)=>new Promise((o=>{void 0!==n&&setTimeout((()=>o()),n),e.addEventListener(t,(()=>o()))}));exports.addClass=n,exports.find=(e,t)=>null===e?null:e instanceof Document||null===e.shadowRoot||void 0===e.shadowRoot?e.querySelector(t):e.shadowRoot.querySelector(t),exports.findAll=e,exports.forEachNode=(e,t,n=window)=>{for(let o=0;o<e.length;o++)t.call(n,e[o],o,e)},exports.getCurrentMQ=e=>{let t=\"\";return e.forEach((e=>{!t.length&&window.matchMedia(e.query).matches&&(t=e.name)})),t},exports.getInnerText=e=>e.innerText||e.textContent||\"\",exports.getParent=(e,t)=>e.closest(t),exports.getUniqueID=()=>Math.random().toString(36).substr(2,9),exports.hasChild=(e,t)=>null!==e.shadowRoot&&void 0!==e.shadowRoot?null!==e.shadowRoot.querySelector(t):null!==e.querySelector(t),exports.hasClass=o,exports.inViewport=(e,t)=>{const n=e.getBoundingClientRect();let o={top:0,right:window.innerWidth||document.documentElement.clientWidth,bottom:window.innerHeight||document.documentElement.clientHeight,left:0};return void 0!==t&&(o=t.getBoundingClientRect()),n.top>=o.top&&n.right<=o.right&&n.bottom<=o.bottom&&n.left>=o.left},exports.isNodeList=e=>!(e instanceof HTMLElement||e instanceof Window),exports.onEvent=s,exports.removeChildren=u,exports.removeChilds=u,exports.removeClass=t,exports.removeEvent=c,exports.toggleClass=(e,r,i)=>{if(null!=e){e instanceof Element&&(e=[e]),e instanceof NodeList&&(e=Array.from(e));for(const s of e)!0===i?n(s,r):o(s,r)||!1===i?t(s,r):n(s,r)}},exports.waitFor=e=>new Promise((t=>{setTimeout((()=>t()),e)})),exports.waitForAnimationEnd=function(e,t){return new Promise(((n,o)=>{e.addEventListener(\"animationend\",(function o(r){r.target===e&&(t&&r.animationName!==t||(e.removeEventListener(\"animationend\",o),n(r)))}))}))},exports.waitForEvent=f,exports.waitForInitialization=e=>{var t;return!0===(null===(t=e.state)||void 0===t?void 0:t.initialized)?Promise.resolve():f(e,\"kl-component-initialized\",3e3)},exports.waitForTransitionEnd=function(e,t){return new Promise(((n,o)=>{e.addEventListener(\"transitionend\",(function o(r){r.target===e&&(t&&r.propertyName!==t||(e.removeEventListener(\"transitionend\",o),n(r)))}))}))};\n//# sourceMappingURL=index.js.map\n","\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0});exports.fetchJSON=(e,t)=>new Promise(((o,s)=>{fetch(e,t).then((e=>{e.ok?o(e.json()):s(e)})).catch((e=>s(e)))}));\n//# sourceMappingURL=index.js.map\n","\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0});const e=e=>\"object\"==typeof e&&null!==e?JSON.stringify(e):String(e);exports.getValue=(e={},t=\"\")=>{const r=t.split(\".\");let o=0,n=e;for(;n&&o<r.length;)n=n[r[o]],o++;return n},exports.isEqual=(t,r)=>typeof t==typeof r&&(\"object\"==typeof t?0===e(t).localeCompare(e(r)):t===r),exports.isFilledObject=function(e){return\"object\"==typeof e&&null!==e&&Object.keys(e).length>0},exports.naiveClone=function e(t){return\"object\"!=typeof t?t:null===t?null:Array.isArray(t)?t.map((t=>e(t))):Object.entries(t).reduce(((t,[r,o])=>(t[r]=e(o),t)),{})},exports.toArray=e=>Array.isArray(e)?e:[e],exports.toString=e;\n//# sourceMappingURL=index.js.map\n","import{throttle as e}from\"@kluntje/js-utils/lib/function-helpers/decorators\";import{getCurrentMQ as t,onEvent as n}from\"@kluntje/js-utils/lib/dom-helpers\";import{fetchJSON as r}from\"@kluntje/js-utils/lib/api-helpers\";import{isFilledObject as s}from\"@kluntje/js-utils/lib/object-helpers\";const i=\"kl-mq-change\",a=\"kl-in-vp\",o=\"kl-out-vp\";class l{constructor(){}static getInstance(){return void 0===l.instance&&(l.instance=new IntersectionObserver(l.handleIntersectionChange)),l.instance}static handleIntersectionChange(e){Object.keys(e).forEach((t=>{const n=e[t],r=n.target;n.isIntersecting?r.dispatchEvent(new CustomEvent(\"kl-in-vp\",{bubbles:!1})):r.dispatchEvent(new CustomEvent(\"kl-out-vp\",{bubbles:!1}))}))}}\n/*! *****************************************************************************\nCopyright (c) Microsoft Corporation.\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n***************************************************************************** */class c{constructor(){this.eventIdMap=new WeakMap,this.eventBindingMap={},this.lastMQ=t(c.mediaQuerys),n(window,\"resize\",this.handleMQChange,this)}static getInstance(e){return void 0===c.instance&&(c.mediaQuerys=e,c.instance=new c),c.instance}handleMQChange(){const e=t(c.mediaQuerys);e!==this.lastMQ&&(window.dispatchEvent(new CustomEvent(\"kl-mq-change\",{detail:{newMQ:e,oldMQ:this.lastMQ}})),this.lastMQ=e)}}!function(e,t,n,r){var s,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(a=(i<3?s(a):i>3?s(t,n,a):s(t,n))||a);i>3&&a&&Object.defineProperty(t,n,a)}([e(100)],c.prototype,\"handleMQChange\",null);const h=Symbol(\"resolve\"),d=Symbol(\"reject\"),u=Symbol(\"pending\");class p{static get PLACEHOLDER_SELECTOR(){return\"kl-i18n-placeholder\"}static getInstance(){return void 0===p._instance&&(p._instance=new p),p._instance}get isSetUp(){return Boolean(this._url||s(this._dictionary))}get loaded(){return this._loaded}get ready(){return this._ready[u]||this.fetchI18nDictionary(),this._ready}setUp({url:e,dictionary:t}={}){if(this.isSetUp)console.warn(\"@kluntje I18nService: service has already been set up. You can't set it up twice!\");else if(e)this._url=e;else{if(!t)throw new Error('@kluntje I18nService: a \"url\" or \"dictionary\" should have been passed to the setUp function.');this._dictionary=t,this._loaded=!0,this._ready[h](),this._ready[u]=!0}}get(e,{fallback:t,interpolations:n}={}){if(this.loaded){if(this._dictionary.hasOwnProperty(e)){let t=this._dictionary[e];return n&&Object.entries(n).forEach((([e,n])=>{t=t.split(`{${e}}`).join(String(n))})),t}return console.warn(`@kluntje I18nService: i18n for key '${e}' is missing in dictionary!`),void 0!==t?t:this.getHumanReadableName(e)}return this._ready[u]||(this.addStyling(),this.fetchI18nDictionary()),this.getPlaceholder(e,{fallback:t,interpolations:n})}constructor(){this._loaded=!1,this._dictionary={},this._ready=this.getReadyPromise()}getReadyPromise(){let e,t;const n=new Promise(((n,r)=>{e=n,t=r}));return n[h]=e,n[d]=t,n[u]=!1,n}ensureSetup(){if(!this.isSetUp)throw new Error(\"@kluntje I18nService: should be set up before calling other APIs\")}addStyling(){const e=document.head,t=document.createElement(\"style\");t.type=\"text/css\",t.appendChild(document.createTextNode(`\\n      .${p.PLACEHOLDER_SELECTOR} {\\n        display: contents;\\n      }\\n    `)),e.appendChild(t)}fetchI18nDictionary(){this.ensureSetup(),this._ready[u]=!0,r(this._url).then((e=>{this._dictionary=e,this._loaded=!0,this._ready[h](),this.fillInPlaceholders()})).catch((e=>{console.error(\"@kluntje I18nService: unable to fetch keys from server!\",e),this._loaded=!0,this._ready[h]()}))}fillInPlaceholders(){Array.from(document.getElementsByClassName(p.PLACEHOLDER_SELECTOR)).forEach((e=>{const{key:t,fallback:n,interpolations:r}=e.dataset;e.replaceWith(this.get(t,{fallback:n,interpolations:r?JSON.parse(r):void 0}))}))}getHumanReadableName(e){return e.split(\".\").reverse()[0].replace(/[A-Z]/g,(e=>` ${e.toLowerCase()}`))}getPlaceholder(e,{fallback:t,interpolations:n}={}){const r=document.createElement(\"span\");return r.innerText=void 0!==t?t:this.getHumanReadableName(e),r.classList.add(p.PLACEHOLDER_SELECTOR),r.setAttribute(\"data-key\",e),t&&r.setAttribute(\"data-fallback\",t),n&&r.setAttribute(\"data-interpolations\",JSON.stringify(n)),r.outerHTML}}var g=new class{constructor(){this.urlSearchParams=new URLSearchParams(window.location.search)}get(e){return this.urlSearchParams.get(e)}getAll(e){return this.urlSearchParams.getAll(e)}getAllKeys(){return Array.from(this.urlSearchParams.keys())}set(e,t){this.urlSearchParams.set(e,t),this.updateUrl()}delete(e){this.urlSearchParams.delete(e),this.updateUrl()}getString(){return this.urlSearchParams.toString()}get curUrl(){return`${window.location.protocol}//${window.location.host}${window.location.pathname}`}updateUrl(){const e=this.getString(),t=this.curUrl,n=window.location.hash,r=\"\"!==e?`${t}?${e}`:t;window.history.replaceState({path:r},\"\",r),\"\"!==n&&(window.location.hash=n)}};var m=new Proxy(console,{get:(e,t)=>null!==g.get(\"js-debug\")?e[t]:()=>{}});var y=new class{constructor(){this.componentMap=new WeakMap,this.intersectionObserver=new IntersectionObserver((e=>this.handleIntersectionChange(e)),{rootMargin:\"500px 0px\"})}subscribe(e,t){this.componentMap.set(e,t),this.intersectionObserver.observe(e)}unsubscribe(e){this.intersectionObserver.unobserve(e),this.componentMap.delete(e)}handleIntersectionChange(e){e.forEach((e=>{const t=e.target;if(!e.isIntersecting||!this.componentMap.has(t))return;const n=this.componentMap.get(t);this.unsubscribe(t),n()}))}};export{m as DebuggerService,p as I18nService,a as IN_VP_EVENT,y as LazyConnectService,i as MQ_CHANGE_EVENT,c as MediaQueryService,o as OUT_VP_EVENT,g as URLSearchParamsService,l as ViewportObserver};\n//# sourceMappingURL=index.module.js.map\n","/**\n * Verifies if the Sidekick Library Plugin is in use by checking if the page is running in an iframe with srcdoc\n * and if the main element has the sidekick-library class.\n * @returns {boolean} Whether the Sidekick Library Plugin is in use.\n */\nexport const isSidekickLibraryActive = (): boolean => {\n  const main = document.querySelector('#main');\n  if (!main) return false;\n  return window.location.href === 'about:srcdoc' && main.classList.contains('sidekick-library');\n};\n","import { isSidekickLibraryActive } from './isSidekickLibraryActive';\n\n/**\n * Returns the true origin of the current page in the browser.\n * If the page is running in an iframe with srcdoc, the ancestor origin is returned.\n * @returns {String} The true origin\n *\n * @example\n * const origin = getOrigin();\n *\n * @remarks\n * Needs to be used when the Sidekick Library Plugin is in use.\n */\nexport function getOrigin(): string {\n  return isSidekickLibraryActive() ? window.parent.location.origin : window.location.origin;\n}\n","import { getOrigin } from '../../helpers/sidekick/getOrigin';\n\n/**\n * Constructs a complete URL for a given endpoint relative to the base URL.\n *\n * This function takes an endpoint as input and constructs a full URL using the\n * base URL derived from `window.hlx.codeBasePath` and the origin of the current\n * location. If the URL construction fails, an error is thrown.\n *\n * @param {string} endpoint - The endpoint to construct the URL for.\n * @returns {URL} - The constructed URL object.\n * @throws {Error} - Throws an error if the URL construction fails.\n *\n * @example\n * // Assuming window.hlx.codeBasePath is '/base/path/' and the origin is 'https://example.com'\n * const url = getUrlForEndpoint('/api/data');\n * console.log(url.toString()); // Output: 'https://example.com/base/path/api/data'\n */\nexport const getUrlForEndpoint = (endpoint: string): URL | never => {\n  try {\n    const location = getOrigin();\n    const baseUrl = new URL(window.hlx.codeBasePath, location);\n    return new URL(endpoint, baseUrl.origin);\n  } catch (error) {\n    throw new Error(`Failed to build Url for endpoint: ${error}`);\n  }\n};\n","import { DebuggerService } from '@kluntje/services';\n\nimport type { BlockModule } from 'Types/BlockModule.types';\n\nimport { BlockMapping } from '../app.types';\nimport { getUrlForEndpoint } from '../utils/getUrlForEndpoint';\n\nenum Status {\n  unloaded = 'unloaded',\n  loading = 'loading',\n  loaded = 'loaded',\n  error = 'error',\n  initialized = 'initialized',\n}\n\n/**\n * Load the es module for the block. The module should be named as the block name.\n * @param {BlockMapping} block - The block to load the module for.\n * @returns {Promise<void>}\n */\nexport async function loadBlockModules(block: BlockMapping): Promise<void> {\n  const blockStatus = (block.element.dataset.blockStatus as Status | undefined) ?? Status.unloaded;\n\n  if (blockStatus === Status.unloaded || blockStatus === Status.initialized) {\n    try {\n      block.element.dataset.blockStatus = Status.loading;\n      const { href } = getUrlForEndpoint(`dist/${block.name}/${block.name}.js`);\n      const blockModule = (await import(href)) as BlockModule;\n\n      if (blockModule.default) {\n        await blockModule.default(block.element);\n      }\n\n      block.element.dataset.blockStatus = Status.loaded;\n    } catch (error) {\n      block.element.dataset.blockStatus = Status.error;\n      DebuggerService.error('loadBlockModules:', error);\n    }\n  }\n}\n","import { getUrlForEndpoint } from '../utils/getUrlForEndpoint';\n\n/**\n * Load a CSS file if it is not already loaded append it to the head.\n * @param {string} endpoint - The endpoint of the CSS file.\n * @returns {Promise<void>}\n */\nexport function loadCSS(endpoint: string): Promise<void> {\n  return new Promise((resolve, reject) => {\n    const { href } = getUrlForEndpoint(endpoint);\n\n    if (!document.querySelector(`head > link[href=\"${href}\"]`)) {\n      const link = document.createElement('link');\n      link.rel = 'stylesheet';\n      link.href = href;\n      link.onload = () => resolve();\n      link.onerror = reject;\n      document.head.append(link);\n    } else {\n      resolve();\n    }\n  });\n}\n","import { DebuggerService } from '@kluntje/services';\n\nimport { BlockMapping } from '../app.types';\nimport { loadCSS } from './loadCSS';\n\n/**\n * Load the block styles. The styles should be named as the block name.\n * @param {BlockMapping} block - The block to load the styles for.\n * @returns {Promise<void>}\n */\nexport async function loadBlockStyles(block: BlockMapping) {\n  try {\n    await loadCSS(`dist/${block.name}/${block.name}.css`);\n  } catch (error) {\n    DebuggerService.error('loadBlockStyles: Could not load css styles.', error);\n  }\n}\n","/**\n * Removes the display property from the section\n * @param {HTMLElement} section - The section to show\n */\nexport function showSection(section: HTMLElement) {\n  section.style.removeProperty('display');\n}\n","import { BlockMapping } from '../app.types';\nimport { collectBlocks } from './collectBlocks';\nimport { loadBlockModules } from './loadBlockModules';\nimport { loadBlockStyles } from './loadBlockStyles';\nimport { showSection } from './showSection';\n\n/**\n * Load the block modules and styles for a section and show the section.\n * @param {HTMLElement} section - The section to load the block modules and styles for.\n * @returns {Promise<void>}\n */\nexport async function loadBlock(section: HTMLElement) {\n  const sectionsBlocks: BlockMapping[] = collectBlocks(section);\n\n  if (!sectionsBlocks.length) {\n    showSection(section);\n    return;\n  }\n\n  const blockPromises: Promise<[void, void]>[] = [];\n\n  for (const block of sectionsBlocks) {\n    blockPromises.push(Promise.all([loadBlockModules(block), loadBlockStyles(block)]));\n  }\n\n  await Promise.all(blockPromises);\n  showSection(section);\n}\n","import { loadBlock } from './loadBlock';\n\n/**\n * Loads Blocks\n * by getting all sections and load every block in every section\n * and shows every section that is finished loading.\n * @param {Document | HTMLElement | null} parentElement - The parent element to load blocks into.\n */\nexport async function loadBlocks(parentElement: Document | HTMLElement | null = document) {\n  if (parentElement) {\n    const sections = [...parentElement.querySelectorAll<HTMLElement>('.section')];\n    const SectionsPromises = sections.map((section) => loadBlock(section));\n\n    await Promise.all(SectionsPromises);\n  }\n}\n","/*\n * This function is used to decorate images in the default content.\n * It adds the class 'image' and 'main' to the parent element of the image.\n */\nexport function decorateImages() {\n  const picture = document.querySelectorAll('.default-content-wrapper picture');\n  picture.forEach((item) => {\n    const parentElement = item.parentElement;\n    if (parentElement) {\n      parentElement.classList.add('image', 'main');\n    }\n  });\n}\n","import { decorateImages } from './decorateImages';\n\n/**\n * This function is used to adjust the markup of a section.\n * It wraps the default content in a div with the class 'default-content-wrapper'.\n * It also adds the class 'section' to the section element.\n * It decorates the images in the default content by calling the 'decorateImages' function.\n * It sets the 'data-section-status' attribute to 'initialized'.\n * It hides the section element.\n * @param {HTMLDivElement} section - The section element to adjust.\n */\nexport function adjustMarkup(section: HTMLDivElement) {\n  const wrappers: HTMLDivElement[] = [];\n  let defaultContent = false;\n  [...section.children].forEach((e) => {\n    if (e.tagName === 'DIV' || !defaultContent) {\n      const wrapper = document.createElement('div');\n      wrappers.push(wrapper);\n      defaultContent = e.tagName !== 'DIV';\n\n      if (defaultContent) {\n        wrapper.classList.add('default-content-wrapper');\n      }\n    }\n    wrappers[wrappers.length - 1].append(e);\n  });\n  wrappers.forEach((wrapper) => section.append(wrapper));\n  decorateImages();\n  section.classList.add('section');\n  section.dataset.sectionStatus = 'initialized';\n  section.style.display = 'none';\n}\n","/**\n * Converts a string into a valid CSS class name.\n *\n * @param {string} name - The string to convert into a CSS class name.\n * @returns {string} The converted CSS class name.\n *\n * @example\n * // Example usage:\n * const inputString = 'Hello, World!';\n * const cssClassName = toClassName(inputString);\n * console.log(cssClassName); // Output: 'hello-world'\n */\nexport function toClassName(name: string): string {\n  return name\n    .toLowerCase()\n    .replace(/[^0-9a-z]/gi, '-')\n    .replace(/-+/g, '-')\n    .replace(/^-|-$/g, '');\n}\n","import { toClassName } from './toClassName';\n\n/**\n * Sanitizes a string for use as a JavaScript property name.\n *\n * @param {string} name - The unsanitized string.\n * @returns {string} - The camelCased name.\n *\n * @example\n * // Example usage:\n * const unsanitizedString = 'background-color';\n * const camelCasedName = toCamelCase(unsanitizedString);\n * console.log(camelCasedName); // Output: 'backgroundColor'\n */\nexport function toCamelCase(name: string): string {\n  if (/^[a-z][A-Za-z0-9]*$/.test(name)) {\n    return name;\n  }\n\n  if (/^[A-Z][A-Za-z0-9]*$/.test(name)) {\n    return name.charAt(0).toLowerCase() + name.slice(1);\n  }\n\n  return toClassName(name).replace(/-([a-z])/g, (g: string) => g[1].toUpperCase());\n}\n","import { toClassName } from '../../utils/toClassName';\n\n/*\n  This function reads the configuration of a block from the HTML file\n  and returns it as a Record<string, string | string[]> object.\n  @param {Element} block The block element\n*/\nexport function readBlockConfig(block: Element): Record<string, string | string[]> {\n  const config: Record<string, string | string[]> = {};\n  block.querySelectorAll(':scope > div').forEach((row) => {\n    if (row.children) {\n      const cols = [...row.children];\n      if (cols[1]) {\n        const col = cols[1];\n        const name = toClassName(cols[0].textContent ?? '');\n        let value: string | string[] = '';\n        if (col.querySelector('a')) {\n          const as = [...col.querySelectorAll('a')];\n          if (as.length === 1) {\n            value = as[0].href;\n          } else {\n            value = as.map((a) => a.href);\n          }\n        } else if (col.querySelector('img')) {\n          const imgs = [...col.querySelectorAll('img')];\n          if (imgs.length === 1) {\n            value = imgs[0].src;\n          } else {\n            value = imgs.map((img) => img.src);\n          }\n        } else if (col.querySelector('p')) {\n          const ps = [...col.querySelectorAll('p')];\n          if (ps.length === 1) {\n            value = ps[0].textContent!;\n          } else {\n            value = ps.map((p) => p.textContent!);\n          }\n        } else {\n          value = row.children[1].textContent!;\n        }\n        config[name] = value;\n      }\n    }\n  });\n  return config;\n}\n","import { toCamelCase } from '../../utils/toCamelCase';\nimport { toClassName } from '../../utils/toClassName';\nimport { readBlockConfig } from './readBlockConfig';\n\n/*\n  This function processes the metadata of a section and applies it to the section element.\n  @param {HTMLElement} section The section element\n*/\nexport function processSectionMetaData(section: HTMLElement) {\n  const sectionMeta = section.querySelector('div.section-metadata');\n  if (sectionMeta) {\n    const meta = readBlockConfig(sectionMeta);\n    Object.keys(meta).forEach((key) => {\n      if (key === 'style') {\n        const styles = (meta.style as string)\n          .split(',')\n          .filter((style: string) => style)\n          .map((style: string) => toClassName(style.trim()));\n        styles.forEach((style: string) => section.classList.add(style));\n      } else {\n        // @ts-ignore - browsers do seem to convert arrays via join(\",\") when setting the attribute value, although it is not in the spec\n        section.dataset[toCamelCase(key)] = meta[key];\n      }\n    });\n    if (sectionMeta.parentElement) sectionMeta.parentElement.remove();\n  }\n}\n","import { adjustMarkup } from './adjustMarkup';\nimport { processSectionMetaData } from './processSectionMetaData';\n\n/**\n * This function is used to transform the sections of the main element.\n * It adjusts the markup of each section by calling the 'adjustMarkup' function.\n * It processes the metadata of each section by calling the 'processSectionMetaData' function.\n * @param {HTMLElement} main - The main element to transform.\n */\nexport function transformSections(main: HTMLElement | null) {\n  main?.querySelectorAll<HTMLDivElement>(':scope > div').forEach((section) => {\n    adjustMarkup(section);\n    processSectionMetaData(section);\n  });\n}\n","/* eslint-disable */\n/* TODO: fix eslint issues and types*/\n\n// group editable texts in single wrappers if applicable.\n// this script should execute after script.js but before the the universal editor cors script\n// and any block being loaded\n\nexport function decorateRichtext(container: Document | HTMLElement | null = document) {\n  function deleteInstrumentation(element) {\n    delete element.dataset.richtextResource;\n    delete element.dataset.richtextProp;\n    delete element.dataset.richtextFilter;\n    delete element.dataset.richtextLabel;\n  }\n\n  let element;\n  while ((element = container?.querySelector('[data-richtext-prop]:not(div)'))) {\n    const { richtextResource, richtextProp, richtextFilter, richtextLabel } = element.dataset;\n    deleteInstrumentation(element);\n    const siblings: any = [];\n    let sibling = element;\n    while ((sibling = sibling.nextElementSibling)) {\n      if (sibling.dataset.richtextResource === richtextResource && sibling.dataset.richtextProp === richtextProp) {\n        deleteInstrumentation(sibling);\n        siblings.push(sibling);\n      } else break;\n    }\n\n    let orphanElements;\n    if (richtextResource && richtextProp) {\n      orphanElements = document.querySelectorAll(\n        `[data-richtext-id=\"${richtextResource}\"][data-richtext-prop=\"${richtextProp}\"]`\n      );\n    } else {\n      const editable = element.closest('[data-aue-resource]');\n      if (editable) {\n        orphanElements = editable.querySelectorAll(\n          `:scope > :not([data-aue-resource]) [data-richtext-prop=\"${richtextProp}\"]`\n        );\n      } else {\n        console.warn(`Editable parent not found or richtext property ${richtextProp}`);\n        return;\n      }\n    }\n\n    if (orphanElements.length) {\n      console.warn(\n        'Found orphan elements of a richtext, that were not consecutive siblings of ' + 'the first paragraph',\n        orphanElements\n      );\n      orphanElements.forEach((orphanElement) => deleteInstrumentation(orphanElement));\n    } else {\n      const group = document.createElement('div');\n      if (richtextResource) {\n        group.dataset.aueResource = richtextResource;\n        group.dataset.aueBehavior = 'component';\n      }\n      if (richtextProp) group.dataset.aueProp = richtextProp;\n      if (richtextLabel) group.dataset.aueLabel = richtextLabel;\n      if (richtextFilter) group.dataset.aueFilter = richtextFilter;\n      group.dataset.aueType = 'richtext';\n      element.replaceWith(group);\n      group.append(element, ...siblings);\n    }\n  }\n}\n\n// in cases where the block decoration is not done in one synchronous iteration we need to listen\n// for new richtext-instrumented elements\nconst observer = new MutationObserver(() => decorateRichtext());\nobserver.observe(document, { attributeFilter: ['data-richtext-prop'], subtree: true });\n\ndecorateRichtext();\n/* eslint-enable */\n","/* eslint-disable */\n/* TODO: fix eslint issues and types*/\nimport { decorateBlock } from '../tasks/decorateBlock';\nimport { decorateBlocks } from '../tasks/decorateBlocks';\nimport { decorateButtons } from '../tasks/decorateButtons';\nimport { loadBlock } from '../tasks/loadBlock';\nimport { loadBlocks } from '../tasks/loadBlocks';\nimport { transformSections } from '../tasks/transformSections';\nimport { decorateRichtext } from './editor-support-rte';\n\nasync function applyChanges(event) {\n  // redecorate default content and blocks on patches (in the properties rail)\n  const { detail } = event;\n\n  const resource =\n    detail?.request?.target?.resource || // update, patch components\n    detail?.request?.target?.container?.resource || // update, patch, add to sections\n    detail?.request?.to?.container?.resource; // move in sections\n  if (!resource) return false;\n  const updates = detail?.response?.updates;\n  if (!updates.length) return false;\n  const { content } = updates[0];\n  if (!content) return false;\n\n  const parsedUpdate = new DOMParser().parseFromString(content, 'text/html');\n  const element = document.querySelector(`[data-aue-resource=\"${resource}\"]`);\n\n  if (element) {\n    if (element.matches('main')) {\n      const newMain = parsedUpdate.querySelector<HTMLElement>(`[data-aue-resource=\"${resource}\"]`);\n      if (newMain) {\n        newMain.style.display = 'none';\n        element.insertAdjacentElement('afterend', newMain);\n        decorateButtons(newMain);\n        transformSections(newMain);\n        decorateBlocks(newMain);\n        decorateRichtext(newMain);\n        await loadBlocks(newMain);\n        element.remove();\n        newMain.style.removeProperty('display');\n        // eslint-disable-next-line no-use-before-define\n        attachEventListners(newMain);\n      }\n      return true;\n    }\n\n    const block =\n      element.parentElement?.closest('.block[data-aue-resource]') || element?.closest('.block[data-aue-resource]');\n    if (block) {\n      const blockResource = block.getAttribute('data-aue-resource');\n      const newBlock = parsedUpdate.querySelector<HTMLElement>(`[data-aue-resource=\"${blockResource}\"]`);\n      if (newBlock) {\n        newBlock.style.display = 'none';\n        block.insertAdjacentElement('afterend', newBlock);\n        decorateButtons(newBlock);\n        decorateBlock(newBlock);\n        decorateRichtext(newBlock);\n        await loadBlock(newBlock);\n        block.remove();\n        newBlock.style.removeProperty('display');\n        return true;\n      }\n    } else {\n      // sections and default content, may be multiple in the case of richtext\n      const newElements = parsedUpdate.querySelectorAll<HTMLElement>(\n        `[data-aue-resource=\"${resource}\"],[data-richtext-resource=\"${resource}\"]`\n      );\n      if (newElements.length) {\n        const { parentElement } = element;\n        if (element.matches('.section')) {\n          const [newSection] = newElements;\n          newSection.style.display = 'none';\n          element.insertAdjacentElement('afterend', newSection);\n          decorateButtons(newSection);\n          decorateRichtext(newSection);\n          transformSections(parentElement);\n          decorateBlocks(parentElement);\n          await loadBlocks(parentElement);\n          element.remove();\n          newSection.style.removeProperty('display');\n        } else {\n          element.replaceWith(...newElements);\n          decorateButtons(parentElement);\n          decorateRichtext(parentElement);\n        }\n        return true;\n      }\n    }\n  }\n\n  return false;\n}\n\nfunction attachEventListners(main) {\n  ['aue:content-patch', 'aue:content-update', 'aue:content-add', 'aue:content-move', 'aue:content-remove'].forEach(\n    (eventType) =>\n      main?.addEventListener(eventType, async (event) => {\n        event.stopPropagation();\n        const applied = await applyChanges(event);\n        if (!applied) window.location.reload();\n      })\n  );\n}\n\nattachEventListners(document.querySelector('main'));\n/* eslint-enable */\n"],"file":"editor-support.js"}