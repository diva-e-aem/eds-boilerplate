{"version":3,"file":"iconnn.js","sources":["../../tools/sidekick/plugins/iconnn/iconnn.ts"],"sourcesContent":["/*\n * Copyright 2023 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under the\n * License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\nimport './iconnn.scss';\n// @ts-ignore import module\nimport { PLUGIN_EVENTS } from 'https://main--franklin-library-host--dylandepass.hlx.live/tools/sidekick/library/events/events.js';\n\ninterface TagItem {\n  tag: string;\n}\n\nfunction getFilteredTags(data: TagItem[], query: string): TagItem[] {\n  if (!query) {\n    return data;\n  }\n  return data.filter((item) => item.tag.toLowerCase().includes(query.toLowerCase()));\n}\n\nconst iconExists = (iconName: string): Promise<boolean> => {\n  return new Promise((resolve) => {\n    const img = new Image();\n    img.src = `/public/icons/${iconName}.svg`; \n    img.onload = () => resolve(true); \n    img.onerror = () => resolve(false); \n  });\n};\n\n\nconst createMenuItems = async (data: TagItem[], query: string): Promise<string> => {\n  const filteredTags = getFilteredTags(data, query);\n  const itemsPromises = filteredTags.map(async (item) => {\n    const iconExistsFlag = await iconExists(item.tag);\n    const iconPath = iconExistsFlag ? `/public/icons/${item.tag}.svg` : ''; \n\n    return `\n      <div class=\"icons-item\">\n        ${iconPath ? `<img src=\"${iconPath}\" alt=\"${item.tag} icon\" class=\"tag-icon\" />` : ''}\n        <span class=\"icon-title\">${item.tag}</span>\n      </div>\n    `;\n  });\n\n  const items = await Promise.all(itemsPromises); \n  return items.join(''); \n};\n\nexport async function decorate(container: HTMLElement, data: TagItem[], query: string): Promise<void> {\n  const menuItems = await createMenuItems(data, query);\n\n  const spContainer = document.createElement('div');\n  spContainer.classList.add('container-icon');\n  spContainer.innerHTML = menuItems;\n  container.append(spContainer);\n\n  document.dispatchEvent(\n    new CustomEvent(PLUGIN_EVENTS.TOAST, {\n      detail: { message: 'Icons loaded successfully!' },\n    })\n  );\n}\n\nexport default {\n  title: 'Icons',\n  searchEnabled: true,\n};\n"],"names":["getFilteredTags","data","query","item","iconExists","iconName","resolve","img","createMenuItems","itemsPromises","iconPath","decorate","container","menuItems","spContainer","PLUGIN_EVENTS","iconnn"],"mappings":"kIAmBA,SAASA,EAAgBC,EAAiBC,EAA0B,CAClE,OAAKA,EAGED,EAAK,OAAQE,GAASA,EAAK,IAAI,YAAY,EAAE,SAASD,EAAM,YAAY,CAAC,CAAC,EAFxED,CAGX,CAEA,MAAMG,EAAcC,GACX,IAAI,QAASC,GAAY,CACxB,MAAAC,EAAM,IAAI,MACZA,EAAA,IAAM,iBAAiBF,CAAQ,OAC/BE,EAAA,OAAS,IAAMD,EAAQ,EAAI,EAC3BC,EAAA,QAAU,IAAMD,EAAQ,EAAK,CAAA,CAClC,EAIGE,EAAkB,MAAOP,EAAiBC,IAAmC,CAEjF,MAAMO,EADeT,EAAgBC,EAAMC,CAAK,EACb,IAAI,MAAOC,GAAS,CAErD,MAAMO,EADiB,MAAMN,EAAWD,EAAK,GAAG,EACd,iBAAiBA,EAAK,GAAG,OAAS,GAE7D,MAAA;AAAA;AAAA,UAEDO,EAAW,aAAaA,CAAQ,UAAUP,EAAK,GAAG,6BAA+B,EAAE;AAAA,mCAC1DA,EAAK,GAAG;AAAA;AAAA,KAAA,CAGxC,EAGM,OADO,MAAM,QAAQ,IAAIM,CAAa,GAChC,KAAK,EAAE,CACtB,EAEsB,eAAAE,EAASC,EAAwBX,EAAiBC,EAA8B,CACpG,MAAMW,EAAY,MAAML,EAAgBP,EAAMC,CAAK,EAE7CY,EAAc,SAAS,cAAc,KAAK,EACpCA,EAAA,UAAU,IAAI,gBAAgB,EAC1CA,EAAY,UAAYD,EACxBD,EAAU,OAAOE,CAAW,EAEnB,SAAA,cACP,IAAI,YAAYC,EAAc,MAAO,CACnC,OAAQ,CAAE,QAAS,4BAA6B,CAAA,CACjD,CAAA,CAEL,CAEA,MAAeC,EAAA,CACb,MAAO,QACP,cAAe,EACjB"}