import{d as a,e as c,f as l,g as m}from"../__chunks__/decorateBlocks.BB7mVK_I.js";import"../__chunks__/preload-helper.DX1wzJSG.js";import"../__chunks__/index.module.DQI0LCqS.js";import"../__chunks__/isSidekickLibraryActive.U-fJCMMj.js";async function f(t){if(t&&t.startsWith("/")){t=t.replace(/(\.plain)?\.html/,"");const n=await fetch(`${t}.plain.html`);if(n.ok){const e=document.createElement("main");e.innerHTML=await n.text();const i=(s,r)=>{e.querySelectorAll(`${s}[${r}^="./media_"]`).forEach(o=>{o[r]=new URL(o.getAttribute(r)??"",new URL(t,window.location.origin)).href})};return i("img","src"),i("source","srcset"),a(e),c(e),l(e),await m(e),e}}return null}async function p(t){var s;const n=t.querySelector("a"),e=n?n.getAttribute("href"):(s=t.textContent)==null?void 0:s.trim();if(!e)return;const i=await f(e);if(i){const r=i.querySelector(":scope .section");r&&(t.classList.add(...r.classList),t.classList.remove("section"),t.replaceChildren(...r.childNodes))}}export{p as default,f as loadFragment};
//# sourceMappingURL=fragment.js.map
