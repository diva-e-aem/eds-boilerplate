import{_ as h}from"./preload-helper.DX1wzJSG.js";import{m as f}from"./index.module.DQI0LCqS.js";import{i as p}from"./isSidekickLibraryActive.U-fJCMMj.js";function l(t){return t.toLowerCase().replace(/[^0-9a-z]/gi,"-").replace(/-+/g,"-").replace(/^-|-$/g,"")}function z(t){t==null||t.querySelectorAll("a").forEach(e=>{if(e.title=e.title||e.textContent,e.href!==e.textContent){const a=e.parentElement,s=e.parentElement.parentElement;e.querySelector("img")||(a.childNodes.length===1&&(a.tagName==="P"||a.tagName==="DIV")&&(e.className="button",a.classList.add("button-container")),a.childNodes.length===1&&a.tagName==="STRONG"&&s.childNodes.length===1&&s.tagName==="P"&&(e.className="button primary",s.classList.add("button-container")),a.childNodes.length===1&&a.tagName==="EM"&&s.childNodes.length===1&&s.tagName==="P"&&(e.className="button secondary",s.classList.add("button-container")))}})}function m(){return p()?window.parent.location.origin:window.location.origin}const u=t=>{try{const e=m(),a=window.hlx.codeBasePath.endsWith("/")?window.hlx.codeBasePath:`${window.hlx.codeBasePath}/`;let s=t;t.startsWith("./")?s=t.substring(2):t.startsWith("/")&&(s=t.substring(1));const o=`${a}${s}`;return new URL(o,e)}catch(e){throw new Error(`Failed to build Url for endpoint: ${e}`)}};function g(t){return new Promise((e,a)=>{const{href:s}=u(t);if(document.querySelector(`head > link[href="${s}"]`))e();else{const o=document.createElement("link");o.rel="stylesheet",o.href=s,o.onload=()=>e(),o.onerror=a,document.head.append(o)}})}function y(t){const e=[];return t.querySelectorAll("[data-block-name]").forEach(s=>{e.push({name:s.dataset.blockName,element:s})}),e}async function E(t){const e=t.element.dataset.blockStatus??"unloaded";if(e==="unloaded"||e==="initialized")try{t.element.dataset.blockStatus="loading";const{href:a}=u(`dist/${t.name}/${t.name}.js`),s=await h(()=>import(a),__vite__mapDeps([]));s.default&&await s.default(t.element),t.element.dataset.blockStatus="loaded"}catch(a){t.element.dataset.blockStatus="error",f.error("loadBlockModules:",a)}}async function S(t){try{await g(`dist/${t.name}/${t.name}.css`)}catch(e){f.error("loadBlockStyles: Could not load css styles.",e)}}function d(t){t.style.removeProperty("display")}async function w(t){const e=y(t);if(!e.length){d(t);return}const a=[];for(const s of e)a.push(Promise.all([E(s),S(s)]));await Promise.all(a),d(t)}async function M(t=document){if(t){const a=[...t.querySelectorAll(".section")].map(s=>w(s));await Promise.all(a)}}function N(){document.querySelectorAll(".default-content-wrapper picture").forEach(e=>{const a=e.parentElement;a&&a.classList.add("image","main")})}function P(t){const e=[];let a=!1;[...t.children].forEach(s=>{if(s.tagName==="DIV"||!a){const o=document.createElement("div");e.push(o),a=s.tagName!=="DIV",a&&o.classList.add("default-content-wrapper")}e[e.length-1].append(s)}),e.forEach(s=>t.append(s)),N(),t.classList.add("section"),t.dataset.sectionStatus="initialized",t.style.display="none"}function A(t){return/^[a-z][A-Za-z0-9]*$/.test(t)?t:/^[A-Z][A-Za-z0-9]*$/.test(t)?t.charAt(0).toLowerCase()+t.slice(1):l(t).replace(/-([a-z])/g,e=>e[1].toUpperCase())}function B(t){const e={};return t.querySelectorAll(":scope > div").forEach(a=>{if(a.children){const s=[...a.children];if(s[1]){const o=s[1],r=l(s[0].textContent??"");let c="";if(o.querySelector("a")){const n=[...o.querySelectorAll("a")];n.length===1?c=n[0].href:c=n.map(i=>i.href)}else if(o.querySelector("img")){const n=[...o.querySelectorAll("img")];n.length===1?c=n[0].src:c=n.map(i=>i.src)}else if(o.querySelector("p")){const n=[...o.querySelectorAll("p")];n.length===1?c=n[0].textContent:c=n.map(i=>i.textContent)}else c=a.children[1].textContent;e[r]=c}}}),e}function L(t){const e=t.querySelector("div.section-metadata");if(e){const a=B(e);Object.keys(a).forEach(s=>{s==="style"?a.style.split(",").filter(r=>r).map(r=>l(r.trim())).forEach(r=>t.classList.add(r)):t.dataset[A(s)]=a[s]}),e.parentElement&&e.parentElement.remove()}}function _(t){t==null||t.querySelectorAll(":scope > div").forEach(e=>{P(e),L(e)})}function q(t){const e=["P","PRE","UL","OL","PICTURE","TABLE","H1","H2","H3","H4","H5","H6"],a=s=>{const o=document.createElement("p");o.append(...s.childNodes),[...s.attributes].filter(({nodeName:r})=>r==="class"||r.startsWith("data-aue")||r.startsWith("data-richtext")).forEach(({nodeName:r,nodeValue:c})=>{o.setAttribute(r,c||""),s.removeAttribute(r)}),s.append(o)};t.querySelectorAll(":scope > div > div").forEach(s=>{var o,r;s.hasChildNodes()&&(!!s.firstElementChild&&e.some(n=>{var i;return((i=s==null?void 0:s.firstElementChild)==null?void 0:i.tagName)===n})?((o=s.firstElementChild)==null?void 0:o.tagName)==="PICTURE"&&(s.children.length>1||(r=s.textContent)!=null&&r.trim())&&a(s):a(s))})}function v(t){if(t){const e=t.classList[0];if(e&&!t.dataset.blockStatus){t.classList.add("block"),t.dataset.blockName=e,t.dataset.blockStatus="initialized",q(t);const a=t.parentElement;a==null||a.classList.add(`${e}-wrapper`);const s=t.closest(".section");s&&s.classList.add(`${e}-container`)}}}function I(t){t==null||t.querySelectorAll("div.section > div > div").forEach(e=>{v(e)})}export{E as a,S as b,y as c,z as d,_ as e,I as f,M as g,g as l,d as s,l as t};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
//# sourceMappingURL=decorateBlocks.BB7mVK_I.js.map
