{"version":3,"mappings":"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","names":["toClassName","name","decorateButtons","element","a","up","twoup","getOrigin","isSidekickLibraryActive","getUrlForEndpoint","endpoint","location","basePath","normalizedEndpoint","fullPath","error","loadCSS","resolve","reject","href","link","collectBlocks","section","blockMap","block","loadBlockModules","blockStatus","blockModule","DebuggerService","loadBlockStyles","showSection","loadBlock","sectionsBlocks","blockPromises","loadBlocks","parentElement","SectionsPromises","decorateImages","item","adjustMarkup","wrappers","defaultContent","e","wrapper","toCamelCase","g","readBlockConfig","config","row","cols","col","value","as","imgs","img","ps","p","processSectionMetaData","sectionMeta","meta","key","style","transformSections","main","wrapTextNodes","validWrappers","wrap","el","nodeName","nodeValue","blockColumn","tagName","_a","_b","decorateBlock","shortBlockName","blockWrapper","decorateBlocks"],"sources":["../../src/utils/toClassName.ts","../../src/app/tasks/decorateButtons.ts","../../src/helpers/sidekick/getOrigin.ts","../../src/app/utils/getUrlForEndpoint.ts","../../src/app/tasks/loadCSS.ts","../../src/app/tasks/collectBlocks.ts","../../src/app/tasks/loadBlockModules.ts","../../src/app/tasks/loadBlockStyles.ts","../../src/app/tasks/showSection.ts","../../src/app/tasks/loadBlock.ts","../../src/app/tasks/loadBlocks.ts","../../src/app/tasks/decorateImages.ts","../../src/app/tasks/adjustMarkup.ts","../../src/utils/toCamelCase.ts","../../src/app/tasks/readBlockConfig.ts","../../src/app/tasks/processSectionMetaData.ts","../../src/app/tasks/transformSections.ts","../../src/app/tasks/wrapTextNodes.ts","../../src/app/tasks/decorateBlock.ts","../../src/app/tasks/decorateBlocks.ts"],"sourcesContent":["/**\n * Converts a string into a valid CSS class name.\n *\n * @param {string} name - The string to convert into a CSS class name.\n * @returns {string} The converted CSS class name.\n *\n * @example\n * // Example usage:\n * const inputString = 'Hello, World!';\n * const cssClassName = toClassName(inputString);\n * console.log(cssClassName); // Output: 'hello-world'\n */\nexport function toClassName(name: string): string {\n  return name\n    .toLowerCase()\n    .replace(/[^0-9a-z]/gi, '-')\n    .replace(/-+/g, '-')\n    .replace(/^-|-$/g, '');\n}\n","/**\n * Decorates paragraphs containing a single link as buttons.\n * @param {Element} element container element\n */\nexport function decorateButtons(element: Element | null) {\n  element?.querySelectorAll('a').forEach((a) => {\n    a.title = a.title || a.textContent!;\n    if (a.href !== a.textContent) {\n      const up = a.parentElement!;\n      const twoup = a.parentElement!.parentElement!;\n      if (!a.querySelector('img')) {\n        if (up.childNodes.length === 1 && (up.tagName === 'P' || up.tagName === 'DIV')) {\n          a.className = 'button'; // default\n          up.classList.add('button-container');\n        }\n        if (\n          up.childNodes.length === 1 &&\n          up.tagName === 'STRONG' &&\n          twoup.childNodes.length === 1 &&\n          twoup.tagName === 'P'\n        ) {\n          a.className = 'button primary';\n          twoup.classList.add('button-container');\n        }\n        if (\n          up.childNodes.length === 1 &&\n          up.tagName === 'EM' &&\n          twoup.childNodes.length === 1 &&\n          twoup.tagName === 'P'\n        ) {\n          a.className = 'button secondary';\n          twoup.classList.add('button-container');\n        }\n      }\n    }\n  });\n}\n","import { isSidekickLibraryActive } from './isSidekickLibraryActive';\n\n/**\n * Returns the true origin of the current page in the browser.\n * If the page is running in an iframe with srcdoc, the ancestor origin is returned.\n * @returns {String} The true origin\n *\n * @example\n * const origin = getOrigin();\n *\n * @remarks\n * Needs to be used when the Sidekick Library Plugin is in use.\n */\nexport function getOrigin(): string {\n  return isSidekickLibraryActive() ? window.parent.location.origin : window.location.origin;\n}\n","import { getOrigin } from '../../helpers/sidekick/getOrigin';\n\n/**\n * Constructs a complete URL for a given endpoint relative to the base URL.\n * The base URL is derived from `window.hlx.codeBasePath` and the current location.\n * This helper respolves URLs for assets in different AEM contexts. (author, publish, local development, sidekick library etc.)\n * @param {string} endpoint - The endpoint of the asset or fetch request.\n * @returns {URL} - The complete URL for the given endpoint.\n *\n * @example\n * // Assuming window.hlx.codeBasePath is '/base/path/' and the origin is 'https://example.com'\n * const url = getUrlForEndpoint('/api/data');\n * console.log(url.href); // Output: 'https://example.com/base/path/api/data'\n */\nexport const getUrlForEndpoint = (endpoint: string): URL | never => {\n  try {\n    const location = getOrigin();\n    const basePath = window.hlx.codeBasePath.endsWith('/') ? window.hlx.codeBasePath : `${window.hlx.codeBasePath}/`;\n    let normalizedEndpoint = endpoint;\n\n    if (endpoint.startsWith('./')) {\n      normalizedEndpoint = endpoint.substring(2);\n    } else if (endpoint.startsWith('/')) {\n      normalizedEndpoint = endpoint.substring(1);\n    }\n\n    const fullPath = `${basePath}${normalizedEndpoint}`;\n    const url = new URL(fullPath, location);\n\n    return url;\n  } catch (error) {\n    throw new Error(`Failed to build Url for endpoint: ${error}`);\n  }\n};\n","import { getUrlForEndpoint } from '../utils/getUrlForEndpoint';\n\n/**\n * Load a CSS file if it is not already loaded append it to the head.\n * @param {string} endpoint - The endpoint of the CSS file.\n * @returns {Promise<void>}\n */\nexport function loadCSS(endpoint: string): Promise<void> {\n  return new Promise((resolve, reject) => {\n    const { href } = getUrlForEndpoint(endpoint);\n\n    if (!document.querySelector(`head > link[href=\"${href}\"]`)) {\n      const link = document.createElement('link');\n      link.rel = 'stylesheet';\n      link.href = href;\n      link.onload = () => resolve();\n      link.onerror = reject;\n      document.head.append(link);\n    } else {\n      resolve();\n    }\n  });\n}\n","import { BlockMapping } from '../app.types';\n\n/**\n * Collect all blocks in a section.\n * @param {HTMLElement} section - The section to collect the blocks from.\n * @returns {BlockMapping[]}\n * @example\n * const blocks = collectBlocks(section);\n * console.log(blocks);\n * Output: [{ name: 'block1', element: HTMLElement }, { name: 'block2', element: HTMLElement }]\n */\nexport function collectBlocks(section: HTMLElement): BlockMapping[] {\n  const blockMap: BlockMapping[] = [];\n  const blocksElements = section.querySelectorAll<HTMLDivElement>('[data-block-name]');\n\n  blocksElements.forEach((block: HTMLDivElement) => {\n    blockMap.push({\n      name: block.dataset.blockName as string,\n      element: block,\n    });\n  });\n\n  return blockMap;\n}\n","import { DebuggerService } from '@kluntje/services';\n\nimport type { BlockModule } from 'Types/BlockModule.types';\n\nimport { BlockMapping } from '../app.types';\nimport { getUrlForEndpoint } from '../utils/getUrlForEndpoint';\n\nenum Status {\n  unloaded = 'unloaded',\n  loading = 'loading',\n  loaded = 'loaded',\n  error = 'error',\n  initialized = 'initialized',\n}\n\n/**\n * Load the es module for the block. The module should be named as the block name.\n * @param {BlockMapping} block - The block to load the module for.\n * @returns {Promise<void>}\n */\nexport async function loadBlockModules(block: BlockMapping): Promise<void> {\n  const blockStatus = (block.element.dataset.blockStatus as Status | undefined) ?? Status.unloaded;\n\n  if (blockStatus === Status.unloaded || blockStatus === Status.initialized) {\n    try {\n      block.element.dataset.blockStatus = Status.loading;\n      const { href } = getUrlForEndpoint(`dist/${block.name}/${block.name}.js`);\n      const blockModule = (await import(href)) as BlockModule;\n\n      if (blockModule.default) {\n        await blockModule.default(block.element);\n      }\n\n      block.element.dataset.blockStatus = Status.loaded;\n    } catch (error) {\n      block.element.dataset.blockStatus = Status.error;\n      DebuggerService.error('loadBlockModules:', error);\n    }\n  }\n}\n","import { DebuggerService } from '@kluntje/services';\n\nimport { BlockMapping } from '../app.types';\nimport { loadCSS } from './loadCSS';\n\n/**\n * Load the block styles. The styles should be named as the block name.\n * @param {BlockMapping} block - The block to load the styles for.\n * @returns {Promise<void>}\n */\nexport async function loadBlockStyles(block: BlockMapping) {\n  try {\n    await loadCSS(`dist/${block.name}/${block.name}.css`);\n  } catch (error) {\n    DebuggerService.error('loadBlockStyles: Could not load css styles.', error);\n  }\n}\n","/**\n * Removes the display property from the section\n * @param {HTMLElement} section - The section to show\n */\nexport function showSection(section: HTMLElement) {\n  section.style.removeProperty('display');\n}\n","import { BlockMapping } from '../app.types';\nimport { collectBlocks } from './collectBlocks';\nimport { loadBlockModules } from './loadBlockModules';\nimport { loadBlockStyles } from './loadBlockStyles';\nimport { showSection } from './showSection';\n\n/**\n * Load the block modules and styles for a section and show the section.\n * @param {HTMLElement} section - The section to load the block modules and styles for.\n * @returns {Promise<void>}\n */\nexport async function loadBlock(section: HTMLElement): Promise<void> {\n  const sectionsBlocks: BlockMapping[] = collectBlocks(section);\n\n  if (!sectionsBlocks.length) {\n    showSection(section);\n    return;\n  }\n\n  const blockPromises: Promise<[void, void]>[] = [];\n\n  for (const block of sectionsBlocks) {\n    blockPromises.push(Promise.all([loadBlockModules(block), loadBlockStyles(block)]));\n  }\n\n  await Promise.all(blockPromises);\n  showSection(section);\n}\n","import { loadBlock } from './loadBlock';\n\n/**\n * Loads Blocks\n * by getting all sections and load every block in every section\n * and shows every section that is finished loading.\n * @param {Document | HTMLElement | null} parentElement - The parent element to load blocks into.\n */\nexport async function loadBlocks(parentElement: Document | HTMLElement | null = document) {\n  if (parentElement) {\n    const sections = [...parentElement.querySelectorAll<HTMLElement>('.section')];\n    const SectionsPromises = sections.map((section) => loadBlock(section));\n\n    await Promise.all(SectionsPromises);\n  }\n}\n","/*\n * This function is used to decorate images in the default content.\n * It adds the class 'image' and 'main' to the parent element of the image.\n */\nexport function decorateImages() {\n  const picture = document.querySelectorAll('.default-content-wrapper picture');\n  picture.forEach((item) => {\n    const parentElement = item.parentElement;\n    if (parentElement) {\n      parentElement.classList.add('image', 'main');\n    }\n  });\n}\n","import { decorateImages } from './decorateImages';\n\n/**\n * This function is used to adjust the markup of a section.\n * It wraps the default content in a div with the class 'default-content-wrapper'.\n * It also adds the class 'section' to the section element.\n * It decorates the images in the default content by calling the 'decorateImages' function.\n * It sets the 'data-section-status' attribute to 'initialized'.\n * It hides the section element.\n * @param {HTMLDivElement} section - The section element to adjust.\n */\nexport function adjustMarkup(section: HTMLDivElement) {\n  const wrappers: HTMLDivElement[] = [];\n  let defaultContent = false;\n  [...section.children].forEach((e) => {\n    if (e.tagName === 'DIV' || !defaultContent) {\n      const wrapper = document.createElement('div');\n      wrappers.push(wrapper);\n      defaultContent = e.tagName !== 'DIV';\n\n      if (defaultContent) {\n        wrapper.classList.add('default-content-wrapper');\n      }\n    }\n    wrappers[wrappers.length - 1].append(e);\n  });\n  wrappers.forEach((wrapper) => section.append(wrapper));\n  decorateImages();\n  section.classList.add('section');\n  section.dataset.sectionStatus = 'initialized';\n  section.style.display = 'none';\n}\n","import { toClassName } from './toClassName';\n\n/**\n * Sanitizes a string for use as a JavaScript property name.\n *\n * @param {string} name - The unsanitized string.\n * @returns {string} - The camelCased name.\n *\n * @example\n * // Example usage:\n * const unsanitizedString = 'background-color';\n * const camelCasedName = toCamelCase(unsanitizedString);\n * console.log(camelCasedName); // Output: 'backgroundColor'\n */\nexport function toCamelCase(name: string): string {\n  if (/^[a-z][A-Za-z0-9]*$/.test(name)) {\n    return name;\n  }\n\n  if (/^[A-Z][A-Za-z0-9]*$/.test(name)) {\n    return name.charAt(0).toLowerCase() + name.slice(1);\n  }\n\n  return toClassName(name).replace(/-([a-z])/g, (g: string) => g[1].toUpperCase());\n}\n","import { toClassName } from '../../utils/toClassName';\n\n/*\n  This function reads the configuration of a block from the HTML file\n  and returns it as a Record<string, string | string[]> object.\n  @param {Element} block The block element\n*/\nexport function readBlockConfig(block: Element): Record<string, string | string[]> {\n  const config: Record<string, string | string[]> = {};\n  block.querySelectorAll(':scope > div').forEach((row) => {\n    if (row.children) {\n      const cols = [...row.children];\n      if (cols[1]) {\n        const col = cols[1];\n        const name = toClassName(cols[0].textContent ?? '');\n        let value: string | string[] = '';\n        if (col.querySelector('a')) {\n          const as = [...col.querySelectorAll('a')];\n          if (as.length === 1) {\n            value = as[0].href;\n          } else {\n            value = as.map((a) => a.href);\n          }\n        } else if (col.querySelector('img')) {\n          const imgs = [...col.querySelectorAll('img')];\n          if (imgs.length === 1) {\n            value = imgs[0].src;\n          } else {\n            value = imgs.map((img) => img.src);\n          }\n        } else if (col.querySelector('p')) {\n          const ps = [...col.querySelectorAll('p')];\n          if (ps.length === 1) {\n            value = ps[0].textContent!;\n          } else {\n            value = ps.map((p) => p.textContent!);\n          }\n        } else {\n          value = row.children[1].textContent!;\n        }\n        config[name] = value;\n      }\n    }\n  });\n  return config;\n}\n","import { toCamelCase } from '../../utils/toCamelCase';\nimport { toClassName } from '../../utils/toClassName';\nimport { readBlockConfig } from './readBlockConfig';\n\n/*\n  This function processes the metadata of a section and applies it to the section element.\n  @param {HTMLElement} section The section element\n*/\nexport function processSectionMetaData(section: HTMLElement) {\n  const sectionMeta = section.querySelector('div.section-metadata');\n  if (sectionMeta) {\n    const meta = readBlockConfig(sectionMeta);\n    Object.keys(meta).forEach((key) => {\n      if (key === 'style') {\n        const styles = (meta.style as string)\n          .split(',')\n          .filter((style: string) => style)\n          .map((style: string) => toClassName(style.trim()));\n        styles.forEach((style: string) => section.classList.add(style));\n      } else {\n        // @ts-ignore - browsers do seem to convert arrays via join(\",\") when setting the attribute value, although it is not in the spec\n        section.dataset[toCamelCase(key)] = meta[key];\n      }\n    });\n    if (sectionMeta.parentElement) sectionMeta.parentElement.remove();\n  }\n}\n","import { adjustMarkup } from './adjustMarkup';\nimport { processSectionMetaData } from './processSectionMetaData';\n\n/**\n * This function is used to transform the sections of the main element.\n * It adjusts the markup of each section by calling the 'adjustMarkup' function.\n * It processes the metadata of each section by calling the 'processSectionMetaData' function.\n * @param {HTMLElement} main - The main element to transform.\n */\nexport function transformSections(main: HTMLElement | null) {\n  main?.querySelectorAll<HTMLDivElement>(':scope > div').forEach((section) => {\n    adjustMarkup(section);\n    processSectionMetaData(section);\n  });\n}\n","/**\n * Wrap inline text content of block cells within a <p> tag.\n * @param {Element} block the block element\n */\nexport function wrapTextNodes(block: HTMLElement) {\n  const validWrappers = ['P', 'PRE', 'UL', 'OL', 'PICTURE', 'TABLE', 'H1', 'H2', 'H3', 'H4', 'H5', 'H6'];\n\n  const wrap = (el: HTMLElement) => {\n    const wrapper = document.createElement('p');\n    wrapper.append(...el.childNodes);\n    [...el.attributes]\n      // move the instrumentation from the cell to the new paragraph, also keep the class\n      // in case the content is a buttton and the cell the button-container\n      .filter(\n        ({ nodeName }) =>\n          nodeName === 'class' || nodeName.startsWith('data-aue') || nodeName.startsWith('data-richtext')\n      )\n      .forEach(({ nodeName, nodeValue }) => {\n        wrapper.setAttribute(nodeName, nodeValue || '');\n        el.removeAttribute(nodeName);\n      });\n    el.append(wrapper);\n  };\n\n  block.querySelectorAll(':scope > div > div').forEach((blockColumn: HTMLElement) => {\n    if (blockColumn.hasChildNodes()) {\n      const hasWrapper =\n        Boolean(blockColumn.firstElementChild) &&\n        validWrappers.some((tagName) => blockColumn?.firstElementChild?.tagName === tagName);\n      if (!hasWrapper) {\n        wrap(blockColumn);\n      } else if (\n        blockColumn.firstElementChild?.tagName === 'PICTURE' &&\n        (blockColumn.children.length > 1 || Boolean(blockColumn.textContent?.trim()))\n      ) {\n        wrap(blockColumn);\n      }\n    }\n  });\n}\n","import { wrapTextNodes } from './wrapTextNodes';\n\n/**\n * Decorate block with classes and data attributes.\n * @param {HTMLElement | null} block - Html block element\n */\nexport function decorateBlock(block: HTMLElement | null) {\n  if (block) {\n    const shortBlockName = block.classList[0];\n    if (shortBlockName && !block.dataset.blockStatus) {\n      block.classList.add('block');\n      block.dataset.blockName = shortBlockName;\n      block.dataset.blockStatus = 'initialized';\n      wrapTextNodes(block);\n      const blockWrapper = block.parentElement;\n      blockWrapper?.classList.add(`${shortBlockName}-wrapper`);\n      const section = block.closest('.section');\n      if (section) section.classList.add(`${shortBlockName}-container`);\n    }\n  }\n}\n","import { decorateBlock } from './decorateBlock';\n\n/**\n * Decorate blocks with classes and data attributes.\n * @param {HTMLElement} main - Html main element\n */\nexport function decorateBlocks(main: HTMLElement | null) {\n  main?.querySelectorAll<HTMLDivElement>('div.section > div > div').forEach((block) => {\n    decorateBlock(block);\n  });\n}\n"],"file":"__chunks__/decorateBlocks.BB7mVK_I.js"}